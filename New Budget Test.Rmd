---
title: "Budget Data Cleaning"
author: "Chelsea Ursaner & Brett Kobold"
date: "5/18/2017"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##Appropriations

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
library(dplyr) #moving and shaping the data
library(tidyr) #allows for melt and cast
library(magrittr) #pipeforwarding package %>% 
library(readxl) #reading the excel file
library(stringr) #working with strings eaiser
library(RSocrata)

#reading in data from data.lacity.org and downloaded files
#Pull existing data from Socrata
appropriations_existing <- read.socrata(url = 'https://data.lacity.org/A-Prosperous-City/Open-Budget-Appropriations-Fiscal-Years-2010-2018/5242-pnmt')


###This is not part of the general workflow, but I need to take out the appropriations I added that don't have all the right information
appropriations_existing <- appropriations_existing %>% filter(Fiscal_Year != 2018) 
#Pull new data from Excel extract
setwd("~/R_labs/laBudget/FY17-18 Proposed Budget")
appropriations_new <- read_excel("Expenditures_Sec2 All Regular Depts and NonDepts_1718Proposed.xlsx", 1) %>% data.frame()
appropriations_new <- appropriations_new %>% select(-Org.Level.5.Code, -Org.Level.5.Name)

names(appropriations_existing)
names(appropriations_new)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
